# コンピューティング

## EC2

- ネットワーク帯域はEC2のインスタンスタイプによって決まる
- AMIにAuthorizedキーも内包される
- Nitro世代以降
  - VPC Traffic Mirroring で不正検知
- オートスケール
  - 1にしておけば自動で修復

### スポット/リザーブドインスタンス

- リザーブドインスタンス
  - AZ単位で権利共有
  - 1年or3年
- スポットインスタンス
  - 上限コストがスポット価格を下回ると強制シャットダウン
  - スポットフリート
    - EC2リソースのターゲット容量に合わせて稼働を制御
    - AZ障害時に活用可能
  - スポットブロック
    - 指定した時間(最大6時間)は稼働を保証する

### インスタンスタイプ

- 汎用: T, M
- コンピューティング: C
- メモリ: R, X
- 高速コンピューティング(GPU): G
- ストレージ最適(I/O): I, D, H

### プレイスメントグループ

- クラスター
  - 単一AZ内で論理グループ化
  - 同一リージョン内の複数VPC可
- パーティション
  - 同一AZ内の別ラック(電源)に必ず配置
  - 同一パーティション内で分散処理用途
- スプレッド
  - 同一AZ内の別ネットワーク、別ラック(電源)に必ず配置
  - 個別の重要な少数インスタンス

### 拡張ネットワーキング

- SR-IOV (Single Route I/O Virtulization) でI/Oパフォーマンス向上

### ハードウェア専有

- 専有ホスト(Dedicated Hosts)
  - どのハードウェアで起動するかまで固定可能
  - アフィニティ設定をHostに設定することで再起動後も同じハードウェアになる
- ハードウェア専有インスタンス(Dedicated Instance)
  - ハードウェア専有は可能だが、起動までは設定不可

### ELB

- スティッキーセッション
  - 背後のEC2インスタンスはセッションがステートフルになる
  - ElastiCacheで解消

## Lambda

- 同時実行制限で呼び出し調整可能
- Lambda@Edge
  - CloudFrontをトリガーに関数実行
- リソースベースポリシー
  - 呼び出しもとを制御可能

## Elastic beanstalk

- プラットフォーム管理のコストを最小化
- インフラの面倒を見なくて良くなる
- ECSに比べるとコスト効率でやや難点あり
- JavaとPHPなどのWebアプリ

## ECS

- Capacity Providerでオートスケーリング設定
